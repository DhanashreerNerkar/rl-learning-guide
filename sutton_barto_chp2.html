<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-armed Bandits - Complete Guide</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.7;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            font-size: 3rem;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .subtitle {
            font-size: 1.3rem;
            color: #666;
            margin-bottom: 20px;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tab-button {
            background: linear-gradient(45deg, #ff9a9e, #fecfef);
            border: none;
            padding: 12px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            color: #333;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .tab-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .tab-button.active {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .concept-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            box-shadow: 0 12px 30px rgba(0,0,0,0.1);
            border-left: 6px solid #ff6b6b;
        }

        .concept-title {
            font-size: 2rem;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .emoji {
            font-size: 2.2rem;
            margin-right: 15px;
        }

        .diagram {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            text-align: center;
            border: 3px dashed #4ecdc4;
        }

        .analogy-box {
            background: linear-gradient(45deg, #e8f5e8, #f0f8f0);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #27ae60;
            font-size: 1.1rem;
        }

        .analogy-title {
            font-weight: bold;
            color: #27ae60;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .interactive-btn {
            background: linear-gradient(45deg, #43e97b, #38f9d7);
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            color: #333;
            margin: 15px 10px;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .interactive-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.2);
        }

        .key-point {
            background: linear-gradient(45deg, #ffeaa7, #fab1a0);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border-left: 4px solid #e17055;
            position: relative;
            font-size: 1.1rem;
        }

        .key-point::before {
            content: 'üí°';
            position: absolute;
            left: -20px;
            top: 20px;
            font-size: 2.5rem;
            background: white;
            border-radius: 50%;
            padding: 8px;
        }

        .formula {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 25px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            margin: 25px 0;
            text-align: center;
            font-size: 1.2rem;
        }

        .formula-explanation {
            background: linear-gradient(45deg, #e8f6f3, #d5f4e6);
            padding: 20px;
            border-radius: 10px;
            margin-top: 10px;
            font-family: inherit;
            color: #333;
            font-size: 1rem;
        }

        .bandit-simulator {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 15px;
        }

        .bandit-arm {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .bandit-arm:hover {
            transform: translateY(-5px);
            border-color: #4ecdc4;
        }

        .bandit-arm.selected {
            background: linear-gradient(45deg, #43e97b, #38f9d7);
            color: white;
        }

        @media (max-width: 768px) {
            .container { padding: 15px; margin: 10px; }
            .title { font-size: 2.2rem; }
            .nav-tabs { gap: 5px; }
            .tab-button { padding: 8px 12px; font-size: 11px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üé∞ Multi-armed Bandits</h1>
            <p class="subtitle">Complete Guide: From Basics to Advanced Algorithms</p>
        </div>

        <div class="nav-tabs">
            <button class="tab-button active" onclick="showSection('intro')">üåü Introduction</button>
            <button class="tab-button" onclick="showSection('problem')">üìê Problem Setup</button>
            <button class="tab-button" onclick="showSection('methods')">‚öñÔ∏è Action-Value Methods</button>
            <button class="tab-button" onclick="showSection('testbed')">üìä 10-Armed Testbed</button>
            <button class="tab-button" onclick="showSection('advanced')">üöÄ Advanced Topics</button>
        </div>

        <!-- Introduction Section -->
        <div id="intro" class="content-section active">
            <div class="concept-card">
                <h2 class="concept-title">
                    <span class="emoji">üé∞</span>
                    What Are Multi-armed Bandits?
                </h2>
                
                <div class="analogy-box">
                    <div class="analogy-title">üé∞ The Casino Story</div>
                    <p>You walk into a casino and see a row of slot machines. Each machine has a different, secret payout rate. You have limited money and time. <strong>Which machines should you play to maximize winnings?</strong></p>
                    <p><strong>The challenge:</strong> You can only learn about each machine by playing it!</p>
                </div>

                <div class="diagram">
                    <h3>üéØ Core Dilemma: Exploration vs Exploitation</h3>
                    <div style="display: flex; justify-content: space-around; align-items: center; margin: 30px 0; flex-wrap: wrap; gap: 20px;">
                        <div style="background: linear-gradient(45deg, #e74c3c, #c0392b); color: white; padding: 25px; border-radius: 20px; text-align: center; min-width: 160px;">
                            <div style="margin-bottom: 10px;">EXPLOITATION</div>
                            <div style="font-size: 2rem; margin: 10px 0;">üèÜ</div>
                            <div>Use best known option</div>
                        </div>
                        <div style="font-size: 2rem; color: #f39c12;">‚öîÔ∏è</div>
                        <div style="background: linear-gradient(45deg, #3498db, #2980b9); color: white; padding: 25px; border-radius: 20px; text-align: center; min-width: 160px;">
                            <div style="margin-bottom: 10px;">EXPLORATION</div>
                            <div style="font-size: 2rem; margin: 10px 0;">üîç</div>
                            <div>Try unknown options</div>
                        </div>
                    </div>
                </div>

                <div class="key-point">
                    <strong>üéØ Why This Matters:</strong> This exploration vs exploitation dilemma appears everywhere in machine learning, from recommender systems to clinical trials to investment strategies.
                </div>
            </div>
        </div>

        <!-- Problem Setup Section -->
        <div id="problem" class="content-section">
            <div class="concept-card">
                <h2 class="concept-title">
                    <span class="emoji">üìê</span>
                    Formal Problem Definition
                </h2>
                
                <div class="formula">
                    q*(a) = E[Rt | At = a]
                </div>
                <div class="formula-explanation">
                    <strong>True Action Value:</strong> The expected reward when action a is selected. This is what we're trying to estimate.
                </div>

                <div class="concept-card">
                    <h3>üéÆ Interactive Restaurant Demo</h3>
                    <p>Choose where to eat lunch. Each restaurant has a hidden quality rating:</p>
                    
                    <div class="bandit-simulator">
                        <div class="bandit-arm" id="arm1" onclick="pullArm(1)">
                            <div style="font-weight: bold;">üçï Pizza Place</div>
                            <div style="margin: 10px 0;">
                                <div>Visits: <span id="pulls1">0</span></div>
                                <div>Avg Rating: <span id="avg1">?</span></div>
                            </div>
                        </div>
                        <div class="bandit-arm" id="arm2" onclick="pullArm(2)">
                            <div style="font-weight: bold;">üçî Burger Joint</div>
                            <div style="margin: 10px 0;">
                                <div>Visits: <span id="pulls2">0</span></div>
                                <div>Avg Rating: <span id="avg2">?</span></div>
                            </div>
                        </div>
                        <div class="bandit-arm" id="arm3" onclick="pullArm(3)">
                            <div style="font-weight: bold;">üçú Noodle Bar</div>
                            <div style="margin: 10px 0;">
                                <div>Visits: <span id="pulls3">0</span></div>
                                <div>Avg Rating: <span id="avg3">?</span></div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0; font-size: 1.1rem;">
                        <div><strong>Total Satisfaction:</strong> <span id="totalReward">0</span></div>
                        <div><strong>Meals Left:</strong> <span id="pullsLeft">15</span></div>
                    </div>
                    
                    <button class="interactive-btn" onclick="resetBandit()">üîÑ Reset</button>
                    <div id="bandit-result"></div>
                </div>
            </div>
        </div>

        <!-- Action-Value Methods Section -->
        <div id="methods" class="content-section">
            <div class="concept-card">
                <h2 class="concept-title">
                    <span class="emoji">‚öñÔ∏è</span>
                    Action-Value Methods
                </h2>
                
                <div class="diagram">
                    <h3>üìä Sample-Average Method</h3>
                    <p>Qt(a) = Average of all rewards when action a was selected</p>
                </div>

                <div class="formula">
                    Qt(a) = (R‚ÇÅ + R‚ÇÇ + ... + Rn) / n
                </div>
                <div class="formula-explanation">
                    Where n = number of times action a selected. As n ‚Üí ‚àû, Qt(a) ‚Üí q*(a)
                </div>

                <div class="diagram">
                    <h3>üéØ Action Selection Strategies</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                        <div style="background: linear-gradient(45deg, #e74c3c, #c0392b); color: white; padding: 20px; border-radius: 15px; text-align: center;">
                            <h4>üèÜ Greedy</h4>
                            <p>Always pick highest Qt(a)</p>
                            <p>Problem: No exploration</p>
                        </div>
                        <div style="background: linear-gradient(45deg, #27ae60, #229954); color: white; padding: 20px; border-radius: 15px; text-align: center;">
                            <h4>üé≤ Œµ-Greedy</h4>
                            <p>1-Œµ: best action<br>Œµ: random action</p>
                            <p>Guaranteed to find optimal</p>
                        </div>
                    </div>
                </div>

                <button class="interactive-btn" onclick="demonstrateMethods()">üéØ Demonstrate Methods</button>
                <div id="methods-demo"></div>
            </div>
        </div>

        <!-- 10-Armed Testbed Section -->
        <div id="testbed" class="content-section">
            <div class="concept-card">
                <h2 class="concept-title">
                    <span class="emoji">üìä</span>
                    The 10-Armed Testbed Results
                </h2>
                
                <div class="analogy-box">
                    <div class="analogy-title">üß™ Scientific Experiment</div>
                    <p>Researchers tested algorithms on 2000 different 10-armed bandit problems to get statistically reliable results.</p>
                </div>

                <div class="diagram">
                    <h3>üìà Performance Comparison</h3>
                    <div style="display: flex; justify-content: space-around; margin: 30px 0;">
                        <div style="text-align: center;">
                            <div style="width: 60px; height: 60px; background: #e74c3c; border-radius: 5px; margin: 0 auto 10px;"></div>
                            <div><strong>Greedy</strong></div>
                            <div>~1.0 reward</div>
                            <div style="color: #e74c3c; font-size: 0.9rem;">Gets stuck</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 60px; height: 80px; background: #f39c12; border-radius: 5px; margin: 0 auto 10px;"></div>
                            <div><strong>Œµ = 0.01</strong></div>
                            <div>~1.2 reward</div>
                            <div style="color: #f39c12; font-size: 0.9rem;">Slow learning</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 60px; height: 100px; background: #27ae60; border-radius: 5px; margin: 0 auto 10px;"></div>
                            <div><strong>Œµ = 0.1</strong></div>
                            <div>~1.35 reward</div>
                            <div style="color: #27ae60; font-size: 0.9rem;">Best balance</div>
                        </div>
                    </div>
                </div>

                <div class="key-point">
                    <strong>üéØ Key Findings:</strong><br>
                    ‚Ä¢ Greedy gets trapped in suboptimal actions<br>
                    ‚Ä¢ Œµ = 0.1 provides optimal balance for this problem<br>
                    ‚Ä¢ Even small exploration (Œµ = 0.01) beats pure greedy<br>
                    ‚Ä¢ Best Œµ depends on problem characteristics
                </div>

                <button class="interactive-btn" onclick="simulateTestbed()">üöÄ Simulate Testbed</button>
                <div id="testbed-results"></div>
            </div>
        </div>

        <!-- Advanced Topics Section -->
        <div id="advanced" class="content-section">
            <div class="concept-card">
                <h2 class="concept-title">
                    <span class="emoji">üöÄ</span>
                    Advanced Bandit Algorithms
                </h2>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; padding: 25px; border-radius: 15px;">
                        <h4>üîÑ Incremental Updates</h4>
                        <p><strong>Formula:</strong> Q ‚Üê Q + Œ±[R - Q]</p>
                        <p><strong>Benefit:</strong> Constant memory and computation</p>
                        <p><strong>Use:</strong> Online learning systems</p>
                    </div>
                    <div style="background: linear-gradient(135deg, #00cec9, #00b894); color: white; padding: 25px; border-radius: 15px;">
                        <h4>üåü Optimistic Values</h4>
                        <p><strong>Idea:</strong> Start with high initial estimates</p>
                        <p><strong>Benefit:</strong> Encourages early exploration</p>
                        <p><strong>Use:</strong> When comprehensive exploration is needed</p>
                    </div>
                    <div style="background: linear-gradient(135deg, #fd79a8, #e84393); color: white; padding: 25px; border-radius: 15px;">
                        <h4>üéØ Upper Confidence Bound</h4>
                        <p><strong>Formula:</strong> Q(a) + c‚àö(ln t / N(a))</p>
                        <p><strong>Benefit:</strong> Principled exploration</p>
                        <p><strong>Use:</strong> When you want optimal exploration strategy</p>
                    </div>
                    <div style="background: linear-gradient(135deg, #fdcb6e, #f39c12); color: white; padding: 25px; border-radius: 15px;">
                        <h4>üìà Gradient Methods</h4>
                        <p><strong>Idea:</strong> Learn action preferences, not values</p>
                        <p><strong>Benefit:</strong> Works well with baseline rewards</p>
                        <p><strong>Use:</strong> When relative performance matters</p>
                    </div>
                </div>

                <div class="key-point">
                    <strong>üéØ Algorithm Selection Guide:</strong><br>
                    ‚Ä¢ <strong>Simple problems:</strong> Œµ-greedy with Œµ = 0.1<br>
                    ‚Ä¢ <strong>Need optimal exploration:</strong> UCB with c = 2<br>
                    ‚Ä¢ <strong>Changing environments:</strong> Constant step-size Œ± = 0.1<br>
                    ‚Ä¢ <strong>Need fast initial exploration:</strong> Optimistic initial values<br>
                    ‚Ä¢ <strong>Preference-based decisions:</strong> Gradient bandit algorithms
                </div>

                <button class="interactive-btn" onclick="compareAll()">üìä Compare All Methods</button>
                <div id="all-comparison"></div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let trueValues = [3.2, 4.1, 2.8];
        let estimates = [0, 0, 0];
        let counts = [0, 0, 0];
        let totalReward = 0;
        let pullsRemaining = 15;

        function showSection(sectionId) {
            console.log('Switching to:', sectionId);
            
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show target section
            const target = document.getElementById(sectionId);
            if (target) {
                target.classList.add('active');
            }
            
            // Update buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        function pullArm(armNumber) {
            if (pullsRemaining <= 0) {
                alert('No more meals! Reset to play again.');
                return;
            }
            
            const armIndex = armNumber - 1;
            const reward = trueValues[armIndex] + (Math.random() - 0.5) * 2;
            
            counts[armIndex]++;
            estimates[armIndex] += (1/counts[armIndex]) * (reward - estimates[armIndex]);
            totalReward += reward;
            pullsRemaining--;
            
            // Update display
            document.getElementById(`pulls${armNumber}`).textContent = counts[armIndex];
            document.getElementById(`avg${armNumber}`).textContent = estimates[armIndex].toFixed(2);
            document.getElementById('totalReward').textContent = totalReward.toFixed(1);
            document.getElementById('pullsLeft').textContent = pullsRemaining;
            
            // Highlight selection
            document.querySelectorAll('.bandit-arm').forEach(arm => arm.classList.remove('selected'));
            document.getElementById(`arm${armNumber}`).classList.add('selected');
            
            if (pullsRemaining === 0) {
                const best = estimates.indexOf(Math.max(...estimates)) + 1;
                const trueBest = trueValues.indexOf(Math.max(...trueValues)) + 1;
                
                document.getElementById('bandit-result').innerHTML = `
                    <div class="key-point">
                        <strong>üéâ Complete!</strong><br>
                        Your choice: Restaurant ${best} (${estimates[best-1].toFixed(2)}‚≠ê)<br>
                        True best: Restaurant ${trueBest} (${trueValues[trueBest-1]}‚≠ê)<br>
                        ${best === trueBest ? 'Perfect discovery!' : 'Close! More exploration might help.'}
                    </div>
                `;
            }
        }

        function resetBandit() {
            estimates = [0, 0, 0];
            counts = [0, 0, 0];
            totalReward = 0;
            pullsRemaining = 15;
            
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`pulls${i}`).textContent = '0';
                document.getElementById(`avg${i}`).textContent = '?';
                document.getElementById(`arm${i}`).classList.remove('selected');
            }
            document.getElementById('totalReward').textContent = '0';
            document.getElementById('pullsLeft').textContent = '15';
            document.getElementById('bandit-result').innerHTML = '';
        }

        function demonstrateMethods() {
            document.getElementById('methods-demo').innerHTML = `
                <div class="diagram">
                    <h4>üéØ Strategy Performance Comparison</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                        <div style="background: #fff3e0; padding: 20px; border-radius: 10px;">
                            <h5 style="color: #e74c3c;">üèÜ Greedy Method</h5>
                            <p>Always choose best current estimate</p>
                            <p><strong>Result:</strong> Fast initial gains, then stuck</p>
                            <p style="color: #e74c3c;"><em>Risk: Missing much better options</em></p>
                        </div>
                        <div style="background: #e8f5e8; padding: 20px; border-radius: 10px;">
                            <h5 style="color: #27ae60;">üé≤ Œµ-Greedy Method</h5>
                            <p>90% best choice, 10% random exploration</p>
                            <p><strong>Result:</strong> Slower start, better long-term</p>
                            <p style="color: #27ae60;"><em>Guaranteed optimal discovery</em></p>
                        </div>
                    </div>
                </div>
            `;
        }

        function simulateTestbed() {
            document.getElementById('testbed-results').innerHTML = `
                <div class="diagram">
                    <h4>üìä Testbed Results Explained</h4>
                    <p>Performance averaged over 2000 different 10-armed bandit problems:</p>
                    <div style="margin: 20px 0;">
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <strong>üèÜ Greedy:</strong> 1.0 average reward, 33% optimal actions
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <strong>üé≤ Œµ=0.01:</strong> 1.2 average reward, 55% optimal actions
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <strong>üé≤ Œµ=0.1:</strong> 1.35 average reward, 80% optimal actions
                        </div>
                    </div>
                    <p><strong>Conclusion:</strong> Exploration pays off! Even small amounts significantly improve performance.</p>
                </div>
            `;
        }

        function compareAll() {
            document.getElementById('all-comparison').innerHTML = `
                <div class="diagram">
                    <h4>üèÜ Algorithm Performance Summary</h4>
                    <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>Best performers on 10-armed testbed:</strong></p>
                        <ol style="text-align: left; margin: 15px 0; padding-left: 25px;">
                            <li><strong>UCB (c=2):</strong> ~1.4 average reward</li>
                            <li><strong>Œµ-greedy (Œµ=0.1):</strong> ~1.35 average reward</li>
                            <li><strong>Optimistic Œµ-greedy:</strong> ~1.3 average reward</li>
                            <li><strong>Œµ-greedy (Œµ=0.01):</strong> ~1.2 average reward</li>
                            <li><strong>Greedy:</strong> ~1.0 average reward</li>
                        </ol>
                        <p><strong>Winner:</strong> UCB provides best balance of exploration and exploitation!</p>
                    </div>
                </div>
            `;
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Multi-armed Bandits guide loaded successfully!');
            resetBandit();
        });
    </script>
</body>
</html>
